---
title: Docker 实战系列 — 安装个人网店
_date: 13 Apr 2015
---
### 开源的世界充满精彩

接触docker不久，我就瞎搞了一个带LAMP的镜像，当时在想，这么轻量级的服务器，启动一千个也没问题啊！确实是这样子的，但我们说，不要做一些毫无意义的事情。所以这篇博文中，我准备讲一点有趣的东西，如何开自己的网店？（到淘宝注册一个？NO，So Low）

先来看看作品效果图![opencart](https://github.com/wi-cuckoo/BlogData/blob/master/images/OpenCart.jpg?raw=true)看着还不赖吧，那咱们就开始来玩玩吧

### 选择Ubuntu:14.04.1

为什么这么specific呢？主要是我不想**pull**一堆下来，虽然是同一个镜像，但看着不爽。

`# docker pull ubuntu:14.04.1`

对了，为什么我不把整个构建镜像的过程用Dockerfile来做呢？一堆命令写上，**build**一下就好了。我主要考虑到命令执行的正确性，毕竟是代码，难免错误，所以开始学最好一步一步来，哪里出了问题好马上fix。

### 安装OpenCart
**OpenCart**是一个开源项目，这里不多介绍。给个[链接](http://www.tecmint.com/create-e-commerce-online-shopping-store-using-opencart-in-linux/)，待会我们得按照这个来。

首先我们需要创建一个容器，并进入bash界面，命令很简单

`# docker run -it --rm ubuntu:14.04.1`

加**rm**是我个人习惯，我总是喜欢容器运行完就移除掉。这里我们就进入了bash界面了，那么接下来，所有的操作就没什么好讲的啦，整个过程参照刚给的链接。说白了，安装几个软件，改改文件权限而已。提醒一下就是安装软件前先运行一下**update**

`# apt-get update`

毕竟镜像制作的时间那么早，有些源也许已经改变了，如果有需要，还得手动添加一些新的源。这里更新一下就没问题了。

### commit完成制作

我做测试的时候，整个安装过程没出现什么错误，服务可以暂时不打开，所以我就自信地commit了。但随后我启动做好的镜像，然后打开网店的安装配置界面，发现有两个东西的状态不对。一个是**php5-gd**，另一个是**php5-mcrypt**。状态显示为关闭的，那我需要打开这个php的扩展。这也就遇到了整个过程中最大的阻力。最后发现，使用这个命令可以打开mcrypt扩展

`# php5enmod mcrypt   然后重启apache2`

如果你也遇到这个问题，愿意的话可以去折腾一下。

整个过程来说还是挺简单的，我之前想用构建私有云的例子来写，后来觉得网店有意思多了，喜欢的朋友可以点这个[链接](https://linux.cn/article-2494-1.html)。当做练习挺好的。

### 自我拉扯

考试终于结束，然而并没有轻松，还有一个月期末，课是越来越多了。下次我准备写点稍微深的东西，不过我觉得基础才是最重要的。
